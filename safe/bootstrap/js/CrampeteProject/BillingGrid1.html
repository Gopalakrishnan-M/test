<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>

<head>
    <meta charset="windows-1252">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!--<link href="css/style.css" rel="stylesheet">
        -->
    <style>
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: "Montserrat", sans-serif;
            font-weight: 400;
            margin: 0 0 20px 0;
            padding: 0;

        }


        div.ex1 {
            background-color: lightblue;
            width: 1000px;
            height: 800px;
            overflow: scroll;
        }

        div.ex2 {
            background-color: lightblue;
            width: 1000x;
            height: 800px;
            overflow: hidden;
        }

        div.ex3 {
            background-color: lightblue;
            //width: 1000x;
            //height: 800px;
            overflow: auto;
        }

        div.ex4 {
            background-color: lightblue;
            width: 1000x;
            height: 800px;
            overflow: visible;
        }


        .bottom_total {
            position: absolute;
            bottom: 40px;
        }

        .bottom_menu {
            position: absolute;
            bottom: 0px;
        }

        #number {
            width: 3em;
        }
    </style>

    <script>

        var productRows = 4;
        var productColumns = 8;


        var productDetails = new Array(productRows);

        for (var i = 0; i < productDetails.length; i++) {
            productDetails[i] = new Array(productColumns);
        }

        function oldcalculateAmount(productRowNo) {
            var qtyxRate = document.getElementById("product" + productRowNo + "Detail2").value * document.getElementById("product" + productRowNo + "Detail3").value;
            var discount = document.getElementById("product" + productRowNo + "Detail5").value * qtyxRate / 100;
            var amount = qtyxRate - discount;

            document.getElementById("product" + productRowNo + "Detail4").value = qtyxRate;
            document.getElementById("product" + productRowNo + "Detail6").value = discount;
            document.getElementById("product" + productRowNo + "Detail7").value = amount;

            calculateTotal();
        }

        function calculateAmount(key) {
    

            var mqty = document.getElementById("MyForm").elements[2].value;
            //alert(mqty);

            var mrate = document.getElementById("MyForm").elements[3].value;
            //alert(mrate);

            //document.getElementById("myForm").elements.namedItem("fname").value;

            //alert("test begin");
            //var mrate = document.getElementById("Product[${'key'}][rate]").value;
            //alert(mrate);

            //var mqty = document.getElementById('$("Product["+key"+"]"[qty]').value;
            //alert(mqty);

            //var mqty = document.getElementById("Product[key][qty]").value;
            let mqtyxrate = mqty * mrate;
            document.getElementById("MyForm").elements[4].value = mqtyxrate;

            var mdiscount = document.getElementById("MyForm").elements[5].value * mqtyxrate / 100;
            document.getElementById("MyForm").elements[6].value = mdiscount;
            //alert(mqtyxmrate);
            //alert(mdiscount);
            //var mdiscount = document.getElementById("Product[key][discp]").value * mqtyxrate / 100;
            //var mdiscount = document.getElementById("MyForm").elements[5].value * mqtyxrate / 100;


            var mamount = mqtyxrate - mdiscount;

            //document.getElementById("Product[key][qtyxrate]").value = mqtyxrate;
            //document.getElementById("Product[key][discount]").value = mdiscount;
            //document.getElementById("Product[key][amount]").value = mamount;

            
            document.getElementById("MyForm").elements[7].value = mamount;


           //alert("test ends");

            calculateTotal();
        }

        function xxxcalculateAmount(fnProductSerial) {
            var mqty = document.getElementById("Product[${fnProductSerial}][qty]").value;

            var mrate = document.getElementById("Product[${fnProductSerial}][rate]").value;
            let mqtyxrate = mqty * mrate;


            var mdiscount = document.getElementById("Product[${fnProductSerial}][discp]").value * mqtyxrate / 100;
            var mamount = mqtyxrate - mdiscount;

            document.getElementById("Product[${fnProductSerial}][qtyxrate]").value = mqtyxrate;
            document.getElementById("Product[${fnProductSerial}][discount]").value = mdiscount;
            document.getElementById("Product[${fnProductSerial}][amount]").value = mamount;

            //calculateTotal();
        }

        function storeinArray() {
            for (var i = 1; i < ProductRow-1; i++) {
                for (var j = 1; j <=8; j++) {
                    productDetails[i][j] = document.getElementById("product" + i + "Detail" + j).value;
                }
            }

        }

        function calculateTotal() {
            sumQuantity = 0.00;
            sumQtyxRate = 0.00;
            sumDiscount = 0.00;
            sumAmount = 0.00;

            for (var i = 1; i <=ProductRow; i++) {
                //sumQuantity = sumQuantity + Number(document.getElementById("Product[${i}][qty]").value);
                //sumQtyxRate = sumQtyxRate + Number(document.getElementById("Product[${i}][qtyxrate]").value);

                //sumDiscount = sumDiscount + Number(document.getElementById("Product[${i}][discount]").value);
                //sumAmount = sumAmount + Number(document.getElementById("Product[${i}][amount]").value);



                sumQuantity = sumQuantity + Number(document.getElementById("Product[${i}][qty]").value);
                sumQtyxRate = sumQtyxRate + Number(document.getElementById("Product[${i}][qtyxrate]").value);

                sumDiscount = sumDiscount + Number(document.getElementById("Product[${i}][discount]").value);
                sumAmount = sumAmount + Number(document.getElementById("Product[${i}][amount]").value);

            }

            document.getElementById("total3").value = sumQuantity;
            document.getElementById("total5").value = sumQtyxRate;

            document.getElementById("total7").value = sumDiscount;
            document.getElementById("total8").value = sumAmount;

        }








    </script>




</head>
<!-- <body style="background-color:pink;" > -->

<body style="background-color:violet">
    <!--<div class="container"> -->
    <div class="jumbotron text-center" style="height : 40px ; padding : 0px; margin : 2px;">
        <h3>Billing Form</h3>
    </div>

    <form id="MyForm">

        <!--<div class="container">
        <div class="container">
        -->
            <div class="row">
                <div class="col-sm-2">
                    <div class="form-group">
                        <label>Product Code</label>
                    </div>
                </div>

                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Product Name</label>
                    </div>
                </div>

                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Qty</label>
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Rate</label>
                    </div>
                </div>

                <div class="col-sm-2">
                    <div class="form-group">
                        <label>Qty*Rate</label>
                    </div>
                </div>

                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Disc%</label>
                    </div>
                </div>

                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Disc/Offer</label>
                    </div>
                </div>


                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Amount</label>
                    </div>
                </div>

            </div>
        <!--</div> -->



        <div id="product-container">
            <div class="row">
                <div class="col-lg-2">
                    <div class="form-group">
                        <!-- <input name="people[1][first_name]"> -->
                        <input type="text" id="Product[1][code]" value="1001" class="form-control"
                            name="Product[1][code]" required >
                    </div>
                </div>

                <div class="col-lg-3">
                    <div class="form-group">
                        <input type="text" id="Product[1][name]" value="Manjal" class="form-control"
                            name="Product[1][name]"  required >
                    </div>
                </div>
                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="number" id="Product[1][qty]" onblur="calculateAmount(1)" value="1.000"
                            class="form-control" name="Product[1][qty]" min="0.001" max="9999"  required >
                    </div>
                </div>

                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="number" id="Product[1][rate]" onblur="calculateAmount(1)" class="form-control"
                            name="Product[1][rate]" value="0" required>
                    </div>
                </div>

                <div class="col-lg-2">
                    <div class="form-group">
                        <input type="number" id="Product[1][qtyxrate]" disabled class="form-control"
                            name="Product[1][qtyxrate]">
                    </div>
                </div>


                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="number" id="Product[1][discp]" onblur="calculateAmount(1)" class="form-control"
                            name="Product[1][discp]" value="0">
                    </div>
                </div>

                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="number" id="Product[1][discount]" onblur="calculateAmount(1)" value="0"
                            class="form-control" name="Product[1][discount]" value="0">
                    </div>
                </div>



                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="number" id="Product[1][amount]" disabled class="form-control"
                            name="Product[1][amount]">
                    </div>
                </div>

            </div>

        </div>













        <div class="bottom_total">

            <div class="row">
                <div class="col-lg-2">
                    <div class="form-group">
                        <input type="text" id="total1" disabled class="form-control">
                    </div>
                </div>

                <div class="col-lg-3">
                    <div class="form-group">
                        <input type="text" id="total2" class="form-control">
                    </div>
                </div>
                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="total3" disabled class="form-control">
                    </div>
                </div>

                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="total4" disabled class="form-control">
                    </div>
                </div>


                <div class="col-lg-2">
                    <div class="form-group">
                        <input type="text" id="total5" disabled class="form-control">
                    </div>
                </div>


                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="total6" disabled class="form-control">
                    </div>
                </div>
                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="total7" disabled class="form-control">
                    </div>
                </div>
                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="total8" disabled class="form-control">
                    </div>
                </div>


            </div>

        </div>







        <div class="bottom_menu">
            <div class="row">


                <div class="col-lg-2">
                    <button type="button" class="btn btn-default btn-lg" onclick="printTotal()">PaymentType</button>
                </div>

                <div class="col-lg-3">
                    <button type="reset" class="btn btn-default btn-lg">PrintAsCashBill</button>
                </div>

                <div class="col-lg-3">
                    <button type="reset" class="btn btn-default btn-lg">ProceedAsCashBill</button>
                </div>

                <div class="col-lg-1">
                    <button type="reset" class="btn btn-default btn-lg">Cancel</button>
                </div>

                <div class="col-lg-1">
                    <button type="reset" class="btn btn-default btn-lg">Hold</button>
                </div>

                <div class="col-lg-2">
                    <button type="reset" class="btn btn-default btn-lg">Hold&Print</button>
                </div>

            </div>


        </div>

        <!--
        <input type="button" value="add-new-product" onclick="addproduct()">
        -->

        <!--
            <a href="javascript:;" id="add-new-product">Add new product</a>
        -->
    </form>



    <script>

        //let iii = 2;
        // let jjj = iii - 1;
        ProductRow = 2;
        xxx =ProductRow-1;
        //document.getElementById('add-new-product').onclick = function () {
        document.getElementById('Product[1][discount]').onblur = function () {
        //document.getElementById('Product[${xxx}][discount]').onblur = function () {
            //alert("xxx");

            let template = `
        
            <div class="row">
                <div class="col-lg-2">
                    <div class="form-group">
                        <input type="text" id="Product[${ProductRow}][code]" value="1002" class="form-control"
                            name="txtProduct[${ProductRow}][code]">
                    </div>
                </div>

                <div class="col-lg-3">
                    <div class="form-group">
                        <input type="text" id="Product[${ProductRow}][name]" value="Sugar" class="form-control"
                            name="txtProduct[${ProductRow}][name]">
                    </div>
                </div>
                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="Product[${ProductRow}][qty]" onblur="calculateAmount(${ProductRow})" value="1"
                            class="form-control" name="Product[${ProductRow}][qty]">
                    </div>
                </div>

                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="Product[${ProductRow}][rate]" onblur="calculateAmount(${ProductRow})" 
                            class="form-control" name="Product[${ProductRow}][rate]">
                    </div>
                </div>

                <div class="col-lg-2">
                    <div class="form-group">
                        <input type="text" id="Product[${ProductRow}][qtyxrate]" disabled class="form-control"
                            name="Product[${ProductRow}][qtyxrate]">
                    </div>
                </div>


                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="Product[${ProductRow}][discp]" onblur="calculateAmount(${ProductRow})" 
                            class="form-control" name="Product[${ProductRow}][discp]">
                    </div>
                </div>

                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="Product[${ProductRow}][discount]" onblur="calculateAmount(${ProductRow})" 
                            class="form-control" name="Product[${ProductRow}][discount]">
                    </div>
                </div>



                <div class="col-lg-1">
                    <div class="form-group">
                        <input type="text" id="Product[${ProductRow}][amount]" disabled class="form-control"
                            name="Product[${ProductRow}][amount]">
                    </div>
                </div>

            </div> 
        
        
        `;

            let newcontainer = document.getElementById('product-container');
            let div = document.createElement('div');
            div.innerHTML = template;
            newcontainer.appendChild(div);
            ProductRow++;

            //i++;
        }
    </script>





</body>

</html>